(function(){var sfControllers;sfControllers=angular.module("sfControllers",[]),sfControllers.controller("HomeIndexCtrl",["$scope","MapMarker",function($scope,MapMarker){return MapMarker.getIndex().then(function(data){return $scope.markers=data})}]),sfControllers.controller("BlogIndexCtrl",["$scope","Article",function($scope,Article){return $scope.articleFilters={featured:"false",blog_item_category:""},$scope.articleCategories=[{name:"News",tag:"news"},{name:"Events",tag:"events"},{name:"Hear Now",tag:"hear_now"},{name:"Gala",tag:"gala"},{name:"Films",tag:"films"},{name:"Celebrity",tag:"celebrity"},{name:"Operation Change",tag:"operation_change"},{name:"Hearing Missions",tag:"hearing_missions"},{name:"Listen Carefully",tag:"listen_carefully"}],$scope.articles=Article.query(),$scope.currentPage=0,$scope.pageSize=9,$scope.numberOfPages=function(){return Math.ceil($scope.articles.length/$scope.pageSize)}}]),sfControllers.controller("BlogShowCtrl",["$scope","$routeParams","Article",function($scope,$routeParams,Article){return $scope.articles=[],$scope.article=Article.get({articleId:$routeParams.articleId},function(){}),$scope.articles=Article.query(),$scope.currentPosition=0,$scope.currentPage=0,$scope.pageSize=3,$scope.numberOfPages=function(){return Math.ceil($scope.articles.length/$scope.pageSize)}}]),sfControllers.controller("MediaMentionsIndexCtrl",["$scope","MediaMentionOrPressItem","Pagination",function($scope,MediaMentionOrPressItem,Pagination){return $scope.pressItemFilters={featured:"false"},$scope.pressItems=[],MediaMentionOrPressItem.getIndex().then(function(data){return $scope.pressItems=data,$scope.pagination=Pagination.getNew(9),$scope.pagination.numPages=Math.ceil($scope.pressItems.length/$scope.pagination.perPage)}),$scope.numberOfPages=function(){return Math.ceil($scope.pressItems.length/$scope.pageSize)},$scope.backgroundStyle=function(item){var _ref;return 0===(null!=(_ref=item.quote)?_ref.length:void 0)?{background:"url("+item.thumbnail_image_url+")"}:{background:"#5CA5D6"}},$scope.isQuote=function(item){return item.quote.length>0}}]),sfControllers.controller("MediaMentionsShowCtrl",["$scope","$routeParams","PressItem","MediaMentionOrPressItem","Pagination",function($scope,$routeParams,PressItem,MediaMentionOrPressItem,Pagination){return $scope.pressItems=[],$scope.article=PressItem.get({pressItemId:$routeParams.articleId},function(){}),MediaMentionOrPressItem.getIndex().then(function(data){return $scope.pressItems=data,$scope.pagination=Pagination.getNew(9),$scope.pagination.numPages=Math.ceil($scope.pressItems.length/$scope.pagination.perPage)}),$scope.numberOfPages=function(){return Math.ceil($scope.pressItems.length/$scope.pageSize)}}])}).call(this),function(){var sfDirectives;sfDirectives=angular.module("sfDirectives",["sfFilters"]),sfDirectives.factory("Pagination",function(){var pagination;return pagination={},pagination.getNew=function(perPage){var paginator;return perPage=void 0===perPage?5:perPage,paginator={numPages:1,perPage:perPage,page:0},paginator.prevPage=function(){return paginator.page>0?paginator.page-=1:void 0},paginator.nextPage=function(){return paginator.page<paginator.numPages-1?paginator.page+=1:void 0},paginator.toPageId=function(id){return id>=0&&id<=paginator.numPages-1?paginator.page=id:void 0},paginator},pagination}),sfDirectives.directive("worldMap",[function(){var controller,link;return link=function(scope){return setTimeout(function(){var mapObject;return $("#world-map-gdp").vectorMap({map:"world_mill_en",markers:scope.markers.coords,markersSelectableOne:!0,zoomOnScroll:!1,series:{markers:[{attribute:"fill",scale:["#C8EEFF","#0071A4"]}]},onMarkerClick:function(event,index){var $popup,content;return content=scope.markers.meta_data[index],$popup=$("#map-popup"),$popup.fadeOut("slow",function(){return $popup.find(".content").empty().html("<span class='close'><a href ng-click='closePopup()'>X</a></span><img src='"+content.thumbnail_url+"'/><div class='background-popup'><h1>"+content.title+"</h1><p>"+content.text+"</p></div>"),$popup.fadeIn()})}}),mapObject=$("#world-map-gdp").vectorMap("get","mapObject")},200)},controller=function($scope){return $scope.closePopup=function(){return $("#map-popup").fadeOut()}},{restrict:"E",link:link,controller:controller,template:"<section class='map'><div id='map-popup'><div class='content'></div></div><div ng-transclude></div><div id='world-map-gdp'></div></section>",transclude:!0,replace:!0,scope:{markers:"="}}}])}.call(this),function(){var sfFilters;sfFilters=angular.module("sfFilters",[]),sfFilters.filter("startFrom",function(){return function(input,start){return input.slice(+start)}}),sfFilters.filter("range",function(){return function(input,total){var i;for(total=parseInt(total),i=0;total>i;)input.push(i),i++;return input}})}.call(this),function(){var HomePageApp,blogPagesApp,mediaMentionsPagesApp;blogPagesApp=angular.module("blogPagesApp",["ngRoute","ngSanitize","ahundredyears.swiper","ahundredyears.thumblist-nav","sfControllers","sfDirectives","sfFilters","sfServices"]),blogPagesApp.config(["$routeProvider",function($routeProvider){return $routeProvider.when("/articles",{templateUrl:"partials/articles/index.html",controller:"BlogIndexCtrl"}).when("/articles/:articleId",{templateUrl:"partials/articles/show.html",controller:"BlogShowCtrl"}).otherwise({redirectTo:"/articles"})}]),mediaMentionsPagesApp=angular.module("mediaMentionsPagesApp",["ngRoute","ngSanitize","ahundredyears.swiper","ahundredyears.thumblist-nav","sfControllers","sfDirectives","sfFilters","sfServices"]),mediaMentionsPagesApp.config(["$routeProvider",function($routeProvider){return $routeProvider.when("/media_mentions",{templateUrl:"partials/media_mentions/index.html",controller:"MediaMentionsIndexCtrl"}).when("/media_mentions/:articleId",{templateUrl:"partials/media_mentions/show.html",controller:"MediaMentionsShowCtrl"}).otherwise({redirectTo:"/media_mentions"})}]),HomePageApp=angular.module("homePageApp",["ngRoute","ngSanitize","ahundredyears.swiper","ahundredyears.thumblist-nav","sfControllers","sfDirectives","sfFilters","sfServices"])}.call(this),function(){"use strict";var sfServices;sfServices=angular.module("sfServices",["ngResource"]),sfServices.factory("Article",["$resource",function($resource){return $resource("/api/blog/:articleId",{},{query:{method:"GET",params:{articleId:"index"},isArray:!0}})}]),sfServices.factory("PressItem",["$resource",function($resource){return $resource("/api/press/:pressItemId",{},{query:{method:"GET",params:{pressItemId:"index"},isArray:!0}})}]),sfServices.factory("MediaMentionOrPressItem",["$q","$http","$resource",function($q,$http){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get("/api/press").success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}]),sfServices.factory("MapMarker",["$q","$http","$resource",function($q,$http){var getIndex;return getIndex=function(){var deferred;return deferred=$q.defer(),$http.get("data/map_markers/index.json").success(function(data){return deferred.resolve(data)}).error(function(reason){return deferred.reject(reason)}),deferred.promise},{getIndex:getIndex}}])}.call(this),function(){var HeaderTabNav,ProgramsPageView,TabBehavior,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};TabBehavior=function(){function TabBehavior(){this.setActiveLink=__bind(this.setActiveLink,this),this.setupListeners()}return TabBehavior.prototype.rootElement=$(document),TabBehavior.prototype.setupListeners=function(){var _this=this;return this.rootElement.on("click","li",function(e){return e.preventDefault(),_this.removeActiveClass(),_this.hideTabbedContent(),_this.setActiveLink(e.currentTarget),_this.makeActive($(e.currentTarget))})},TabBehavior.prototype.setActiveLink=function(link){var selected_tab;return selected_tab=$(link).find("a").data().contentClass,$(selected_tab).fadeIn()},TabBehavior.prototype.makeActive=function($item){return $item.addClass("active")},TabBehavior.prototype.removeActiveClass=function(){return this.rootElement.find("li").removeClass("active")},TabBehavior.prototype.hideTabbedContent=function(){return this.rootElement.find(".tab-content").hide()},TabBehavior}(),HeaderTabNav=function(_super){function HeaderTabNav(){this.hideTabbedContent(),HeaderTabNav.__super__.constructor.apply(this,arguments)}return __extends(HeaderTabNav,_super),HeaderTabNav.prototype.rootElement=$(".header-nav"),HeaderTabNav.prototype.setupListeners=function(){var _this=this;return this.rootElement.on("click","ul.tabs li",function(e){var isActive;return e.preventDefault(),isActive=$(e.currentTarget).hasClass("active"),_this.removeActiveClass(),_this.hideTabbedContent(),isActive?void 0:(_this.setActiveLink(e.currentTarget),_this.makeActive($(e.currentTarget)))})},HeaderTabNav}(TabBehavior),ProgramsPageView=function(_super){function ProgramsPageView(){this.setfirstCurrentElement(),ProgramsPageView.__super__.constructor.apply(this,arguments)}return __extends(ProgramsPageView,_super),ProgramsPageView.prototype.rootElement=$(".tabbed-content"),ProgramsPageView.prototype.setfirstCurrentElement=function(){var currentTab;return this.hideTabbedContent(),currentTab=$(".tabbed-content li").first(),this.makeActive(currentTab),this.setActiveLink(currentTab)},ProgramsPageView}(TabBehavior),$(function(){return new HeaderTabNav,$(".programs-page").length?new ProgramsPageView:void 0})}.call(this);